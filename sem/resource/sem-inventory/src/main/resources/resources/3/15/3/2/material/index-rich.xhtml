<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:pc="http://bee32.com/plover/core"
    xmlns:sem="http://bee32.com/sem/functions" xmlns:p="http://primefaces.prime.com.tr/ui"
    xmlns:t="http://myfaces.apache.org/tomahawk">
<!-- InstanceBegin template="/Templates/seccaJsf.dwt.jsp" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<ui:composition template="/template/primefaces.xhtml">

    <ui:define name="title">material</ui:define>

    <ui:define name="content">

        <h:form id="note">
            <p:growl id="growl" showDetail="true" />
        </h:form>

        <h:form id="main">

            <p:layout style="min-width:400px;min-height:200px;" id="layout">

                <p:layoutUnit position="north">
                    <p:commandButton value="新增物料" onclick="materialModual.show();" />
                </p:layoutUnit>

                <p:layoutUnit position="west" header="物料树" resizable="true" size="200" minSize="40" collapsible="true">
                    <p:tree value="#{materialViewBean.root}" var="node" dynamic="true" selectionMode="single"
                        selection="#{materialViewBean.selectedMaterialNode}" style="width:150px;">
                        <p:ajax event="select" listener="#{materialViewBean.onNodeSelect}" update="main:materialList" />
                        <p:treeNode>
                            <h:outputText value="#{node.name}" />
                        </p:treeNode>
                    </p:tree>
                </p:layoutUnit>

                <p:layoutUnit position="center">
                    <p:dataTable var="material" value="#{materialViewBean.materialList}" id="materialList">
                        <p:column headerText="物料名称">
                            <h:outputText value="#{material.name}" />
                        </p:column>
                        <p:column headerText="序列号">
                            <h:outputText value="#{material.serial}" />
                        </p:column>
                        <p:column headerText="条形码">
                            <h:outputText value="#{material.barCode}" />
                        </p:column>
                        <p:column headerText="基本单位">
                            <h:outputText value="#{material.unit.name}" />
                        </p:column>
                        <p:column headerText="操作">
                            <p:commandLink value="详细"></p:commandLink>
                        </p:column>
                    </p:dataTable>
                </p:layoutUnit>
            </p:layout>

        </h:form>

        <h:form id="material">
            <p:dialog header="Basic Dialog" widgetVar="materialModual">
                <p:selectOneMenu value="#{materialViewBean.tempMaterial.unit.displayId}">
                    <f:selectItems value="#{materialViewBean.units}" />
                </p:selectOneMenu>
            </p:dialog>
        </h:form>

    </ui:define>
</ui:composition>
</html>