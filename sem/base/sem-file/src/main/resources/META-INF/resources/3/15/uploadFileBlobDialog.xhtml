<h:panelGroup xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:p="http://primefaces.org/ui">

    <c:set var="_bean" value="${uploadFileBlobDialogBean}" />
    <c:set var="_var" value="${var != null ? var : 'uploadFileBlobDialog'}" />
    <c:set var="_caption" value="${caption != null ? caption : _bean.caption}" />
    <c:set var="_multiple" value="${multiple != null ? multiple : true}" />
    <c:set var="_listener" value="${listener != null ? listener : _bean}" />
    <c:set var="_update" value="${update != null ? update : viewConfig.defaultUpdateTarget}" />

    <!-- modal="true" not work here. -->
    <p:dialog header="${_caption}" widgetVar="${_var}">
        <h:form enctype="multipart/form-data" style="max-height: 30em; margin: 1em">
            <p:fileUpload mode="advanced" multiple="${_multiple}" allowTypes="${viewConfig.allowTypes}"
                sizeLimit="${viewConfig.maxFileSize}" fileUploadListener="${_listener.handleFileUpload}"
                update="${_update}" />
            <div align="right">
                <p:commandButton value="关闭" oncomplete="${_var}.hide();"  />
            </div>
        </h:form>
    </p:dialog>

</h:panelGroup>
