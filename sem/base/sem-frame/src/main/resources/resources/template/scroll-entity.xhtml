<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:p="http://primefaces.org/ui"
    template="/template/simple-entity.xhtml">

    <ui:param name="plainEditForm" value="true" />
    <ui:param name="searchUpdates" value=":mainForm, :editDialog:form" />

    <ui:define name="toolbar">
        <p:toolbar id="toolbar">
            <p:toolbarGroup align="left">
                <ui:insert name="toolbarContexts" />
            </p:toolbarGroup>
            <p:toolbarGroup align="left">
                <p:commandButton id="createButton" value="新建" actionListener="${bean.showCreateForm}"
                    disabled="${bean.editing}" update="toolbar, :editDialog:form" />
                <p:commandButton id="editButton" value="修改" actionListener="${bean.showEditForm}"
                    disabled="${bean.editing or not bean.selected}" update="toolbar, :editDialog:form" />
                <p:commandButton id="deleteButton" value="删除" onclick="deleteConfirmDialog.show()"
                    disabled="${bean.editing or not bean.selected}" update="toolbar" />
                <ui:remove>
                    <!-- 不能跨表单提交！ -->
                    <p:commandButton id="save-validated" value="保存" actionListener="${bean.save}"
                        disabled="${bean.currentView == 'content' or !bean.editing}" update=":mainForm, ${mirrorTargets}, :editDialog:form" />
                    <p:commandButton id="cancel" value="${bean.currentView == 'content'  ? '返回' : '取消'}"
                        actionListener="${bean.showIndex}" disabled="${bean.currentView == 'content' or !bean.editing}"
                        update=":mainForm:toolbar, :editDialog:form" />
                </ui:remove>
                <ui:insert name="toolbarPeripherals" />
            </p:toolbarGroup>
            <p:toolbarGroup align="right">
                <p:commandButton id="first" value="第一条" actionListener="${bean.gotoFirst}"
                    disabled="${bean.first or bean.dataModel.rowCount == 0 or bean.editing}" update="mainForm, :editDialog:form" />
                <p:commandButton id="previous" value="上一条" actionListener="${bean.gotoPrevious}"
                    disabled="${bean.first or bean.dataModel.rowCount == 0 or bean.editing}" update="mainForm, :editDialog:form" />
                <p:commandButton id="next" value="下一条" actionListener="${bean.gotoNext}"
                    disabled="${bean.last or bean.dataModel.rowCount == 0 or bean.editing}" update="mainForm, :editDialog:form" />
                <p:commandButton id="last" value="最末条" actionListener="${bean.gotoLast}"
                    disabled="${bean.last or bean.dataModel.rowCount == 0 or bean.editing}" update="mainForm, :editDialog:form" />
                <p:separator />
                <p:inputText id="rowNumber" value="${bean.rowNumberInput}" disabled="${bean.editing}" style="width: 3em;" />
                <h:outputText value="/${bean.dataModel.rowCount}" />
                <p:commandButton id="jump" value="前往" actionListener="${bean.gotoInput}" disabled="${bean.editing}"
                    update="mainForm, :editDialog:form" />
            </p:toolbarGroup>
        </p:toolbar>
    </ui:define>

    <ui:define name="dataContainer">
        <!-- No listing at all. -->
    </ui:define>

</ui:composition>
