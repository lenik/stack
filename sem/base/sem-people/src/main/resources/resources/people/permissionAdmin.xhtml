<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:pc="http://bee32.com/plover/core"
      xmlns:sem="http://bee32.com/sem/functions"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<ui:composition template="/template/newsite.xhtml">

	<ui:define name="title">权限管理</ui:define>


	<ui:define name="content">

		<h:outputStylesheet>
            .align_top {
                vertical-align:top;
            }
        </h:outputStylesheet>


		<h:form id="permissionForm">

			<p:growl id="growl" showDetail="true" />
			<t:panelGrid columns="2" rowClasses="align_top">
                <p:tabView header="权限主体列表">

                    <p:tab title="组列表">
                        <p:dataTable id="groups" var="group" value="#{permissionAdminBean.groups}"
                            resizableColumns="true"
                            selection="#{permissionAdminBean.selectedGroup}"
                            selectionMode="single" rowIndexVar="rowIndex">

                            <p:ajax event="rowSelect"
                                listener="#{permissionAdminBean.onRowSelectGroup}"
                                update="permissions" />
                            <p:ajax event="rowUnselect"
                                listener="#{personAdminBean.onRowUnselectGroup}"
                                update="permissions" />


                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="序号" />
                                </f:facet>
                                <h:outputText value="#{rowIndex + 1}" />
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="名称" />
                                </f:facet>
                                <h:outputText value="#{group.name}" />
                            </p:column>

                        </p:dataTable>
                    </p:tab>

                    <p:tab title="角色列表">
                        <p:dataTable id="roles" var="role" value="#{permissionAdminBean.roles}"
                            resizableColumns="true"
                            selection="#{permissionAdminBean.selectedRole}"
                            selectionMode="single" rowIndexVar="rowIndex">

                            <p:ajax event="rowSelect"
                                listener="#{permissionAdminBean.onRowSelectRole}"
                                update="permissions" />
                            <p:ajax event="rowUnselect"
                                listener="#{personAdminBean.onRowUnselectRole}"
                                update="permissions" />


                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="序号" />
                                </f:facet>
                                <h:outputText value="#{rowIndex + 1}" />
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="名称" />
                                </f:facet>
                                <h:outputText value="#{role.name}" />
                            </p:column>

                        </p:dataTable>

					</p:tab>

					<p:tab title="用户列表">
						<p:dataTable id="users" var="user" value="#{permissionAdminBean.users}"
							resizableColumns="true"
							selection="#{permissionAdminBean.selectedUser}"
							selectionMode="single" rowIndexVar="rowIndex">

                            <p:ajax event="rowSelect"
                                listener="#{permissionAdminBean.onRowSelectUser}"
                                update="permissions" />
                            <p:ajax event="rowUnselect"
                                listener="#{personAdminBean.onRowUnselectUser}"
                                update="permissions" />


                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="序号" />
                                </f:facet>
                                <h:outputText value="#{rowIndex + 1}" />
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="名称" />
                                </f:facet>
                                <h:outputText value="#{user.name}" />
                            </p:column>

						</p:dataTable>
					</p:tab>

                </p:tabView>


                <p:panel header="权限列表">

					<p:dataTable id="permissions" resizableColumns="true" rowIndexVar="rowIndex">
						<p:columnGroup type="header">
							<p:row>
								<p:column rowspan="3" colspan="2" headerText="权限资源" />
								<p:column colspan="7" headerText="权限" />
							</p:row>

							<p:row>
                                <p:column headerText="管理" />
                                <p:column headerText="读取" />
                                <p:column headerText="写入" />
                                <p:column headerText="执行" />
                                <p:column headerText="建立" />
                                <p:column headerText="修改" />
                                <p:column headerText="删除" />
							</p:row>
						</p:columnGroup>


						<p:column>
							<f:facet name="header">
								<h:outputText value="序号" />
							</f:facet>
							<h:outputText value="#{rowIndex + 1}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="a" />
							</f:facet>
							<h:outputText value="1" />
						</p:column>


					</p:dataTable>


				</p:panel>
			</t:panelGrid>


		</h:form>

	</ui:define>
</ui:composition>
</html>
