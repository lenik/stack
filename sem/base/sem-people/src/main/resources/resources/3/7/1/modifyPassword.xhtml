<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:p="http://primefaces.org/ui"
    template="/template/custom-rich.xhtml" xmlns:t="http://myfaces.apache.org/tomahawk">

    <ui:define name="title">修改密码</ui:define>

    <ui:define name="scripts.user">
        <script src="modifyPassword.js"></script>
    </ui:define>

    <ui:define name="content">
        <h:form id="modifyPasswordForm">
            <p:panel header="修改密码">
                <t:panelGrid columns="2" columnClasses="field-label, field-content">

                    <h:outputLabel value="当前用户：" />
                    <ui:repeat var="node" value="#{sessionPerson.chain}">
                        <span style="">#{node}</span>
                    </ui:repeat>

                    <h:outputLabel for="oldPass" value="旧密码：" />
                    <h:panelGroup>
                        <p:inputText id="oldPassPlain" type="password" onchange="calcDigestOld();" />
                        <h:inputHidden id="oldPass" value="#{modifyPasswordBean.oldPass}" label="旧密码" />
                    </h:panelGroup>

                    <h:outputLabel for="newPass" value="新密码：" />
                    <h:panelGroup>
                        <p:inputText id="newPassPlain" type="password" onchange="calcDigestNew();" />
                        <h:inputHidden id="newPass" value="#{modifyPasswordBean.newPass}" label="新密码" />
                    </h:panelGroup>

                    <h:outputLabel for="confirmPass" value="新密码确认：" />
                    <h:panelGroup>
                        <p:inputText id="confirmPassPlain" type="password" onchange="calcDigestConfirm();" />
                        <h:inputHidden id="confirmPass" value="#{modifyPasswordBean.confirmPass}" label="新密码确认" />
                    </h:panelGroup>

                    <t:panelGroup colspan="2">
                        <hr/>
                    </t:panelGroup>

                    <t:panelGroup colspan="2">
                        <p:commandButton value="修改" update="modifyPasswordForm" actionListener="#{modifyPasswordBean.modify}" />
                    </t:panelGroup>
                </t:panelGrid>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
