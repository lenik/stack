<ui:composition template="/template/_primefaces.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:p="http://primefaces.org/ui" xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:icsf="http://java.sun.com/jsf/composite/3/7">

    <ui:define name="title">登录</ui:define>

    <ui:define name="scripts.user">
        <script language="javascript" src="${location.LIB_JS}/jquery.sha1.js"></script>
        <script src="login.js"></script>
    </ui:define>

    <ui:define name="menu" />

    <ui:define name="content">
        <div style="margin: 0; width: 100%;">
            <img src="${location.STYLE}/banner.gif" />
        </div>

        <div style="margin-top:50px;margin-bottom:50px;">

            <p:fieldset styleClass="annotation" style="background: #fee">
                <h:panelGrid styleClass="f-medium f-red" columns="2"
                    columnClasses="f-top f-sep-right  f-pad100, f-top f-pad100">
                    <h:panelGroup>
                        <img src="lock.gif" width="80" />
                    </h:panelGroup>
                    <h:panelGroup>
                        为了通信安全，您在使用本系统前需要安装安全证书。证书的下载和安装说明请参见：
                        <ul>
                            <li>
                                <a target="_blank" href="http://ca.bee32.com/readme.html">http://ca.bee32.com/readme.html</a>
                            </li>
                            <li>
                                <a target="_blank" href="http://ca.bee32.com:800/readme.html">http://ca.bee32.com:800/readme.html</a>
                            </li>
                        </ul>

                        <h:form id="loginForm" styleClass="f-center" style=" color: black; margin: 1em;  padding: 1em; ">
                            <h:inputHidden id="challenge" value="#{loginBean.challenge}" />

                            <h:panelGrid columns="2" styleClass="f-center">
                                <t:panelGroup style="text-align:right;">
                                    <h:outputLabel for="username" value="用户名:" styleClass="f-medium" />
                                </t:panelGroup>
                                <p:inputText id="username" value="#{loginBean.username}" label="用户名" />

                                <t:panelGroup style="text-align:right;">
                                    <h:outputLabel for="password" value="密码:" styleClass="f-medium" />
                                </t:panelGroup>
                                <t:panelGroup>
                                    <p:inputText id="passPlain" type="password" onchange="calcDigest();"
                                        label="密码" />
                                    <h:inputHidden id="password" value="#{loginBean.password}" label="密码" />
                                </t:panelGroup>
                            </h:panelGrid>

                            <div align="center" style="margin-top: 1em">
                                <p:commandButton id="login" icon="ui-icon-circle-check" value="登录"
                                    styleClass="f-medium" actionListener="#{loginBean.login}" oncomplete="handleLoginRequest(xhr, status, args)" />
                            </div>
                        </h:form>

                        <div style="color: gray; font-size: small">
                            小知识：
                            <ul>
                                <li>
                                    怎么知道我的通信是安全的？
                                </li>
                                请检查浏览器上的地址栏是否以 https:// 开头，如果不是，您的通信有可能被他人侦听。
                                <li>证书可以被伪造吗？</li>
                                相同名称的证书是可以伪造的，但伪造的证书不可能具有相同的数字指纹。
                                智恒软件有限责任公司的安全根证书的 SHA-1 指纹应为
                                <b> 252DBD3F 9148D3A8 9BCE30A2 7E2B1191</b>
                                。
                                <li>忘记密码怎么办？</li>
                                请联系系统管理员，以重设您的登录密码。
                            </ul>
                        </div>
                    </h:panelGroup>
                </h:panelGrid>
            </p:fieldset>

        </div>
    </ui:define>
</ui:composition>