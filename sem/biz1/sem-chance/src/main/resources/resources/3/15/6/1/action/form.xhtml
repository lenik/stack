<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:pc="http://bee32.com/plover/core"
    xmlns:sem="http://bee32.com/sem/functions">

<ui:composition template="/template/entity/form.xhtml">

    <ui:define name="styles.user">
        <!--  <link rel="stylesheet" type="text/css" href="form.css" />  -->
    </ui:define>

    <ui:define name="scripts.user">
        <script type="text/javascript" src="form.js"></script>
    </ui:define>

    <ui:define name="table">
        <table>
            <tr>
                <td>日期:</td>
                <td><input type="text" id="date" value="${it.date}" /></td>
            </tr>
            <tr>
                <td>行动人:</td>
                <td><c:if test="${fn:length(it.actor.displayName) eq 0}">
                        <h:selectOneMenu id="actorId">
                            <f:selectItem itemLabel="" itemValue="" />
                            <c:forEach var="actor" items="${actors}">
                                <f:selectItem itemLabel="${actor.name}" itemValue="${actor.id}" />
                            </c:forEach>
                        </h:selectOneMenu>
                    </c:if> <c:if test="${fn:length(it.actor.displayName) gt 0}">
                        <input type="text" id="actor" name="actor" value="${it.actor.displayName}" readonly="readonly"
                            maxlength="20" />
                        <input type="hidden" id="actorId" name="actorId" value="${it.id}" />
                    </c:if>
                </td>
            </tr>
            <tr>
                <td>类型:</td>
                <td><h:selectOneMenu id="plan" value="${it.actionType}">
                        <f:selectItem itemLabel="计划" itemValue="plan" />
                        <f:selectItem itemLabel="日志" itemValue="task" />
                    </h:selectOneMenu></td>
            </tr>
            <tr>
                <td>拜访客户:</td>
                <td><c:forEach var="party" items="${it.parties}">
                        <a>${party.name}</a>
                    </c:forEach> <input type="button" id="addParty" value="增加客户" /></td>
            </tr>
            <tr>
                <td>开始时间:</td>
                <td><input type="text" id="beginTime" name="beginTime"
                    value="${fn:substring(it.beginTime, 11, 16)}" />
                </td>
            </tr>
            <tr>
                <td>结束时间:</td>
                <td><input type="text" id="beginTime" name="beginTime"
                    value="${fn:substring(it.beginTime, 11, 16)}" /></td>
            </tr>
            <tr>
                <td>洽谈方式:</td>

                <td><h:selectOneMenu id="style" value="${it.style.name}">

                        <!--
                    <c:forEach var="style" items="${styles}" >
                            <f:selectItem itemLabel="电话" itemValue="TELE" />
                    </c:forEach>
                 -->
                        <f:selectItem itemLable="" itemValue="" />
                        <f:selectItem itemLabel="电话" itemValue="TELE" />
                        <f:selectItem itemLabel="面谈" itemValue="TALK" />
                        <f:selectItem itemLabel="互联网" itemValue="INTE" />
                    </h:selectOneMenu></td>
            </tr>
            <tr>
                <td>洽谈内容:</td>
                <td><textarea id="content" name="content">${it.content}</textarea>
                </td>
            </tr>
            <tr>
                <td>费用详细:</td>
                <td><textarea id="spending" name="spending">${it.spending}</textarea>
                </td>
            </tr>
            <tr>
                <td>对应机会:</td>
                <td><c:if test="${fn:length(it.chance.subject) eq 0}">
                        <h:selectOneMenu id="chanceId">
                            <f:selectItem itemLable="" itemValue="" />
                            <c:forEach var="chance" items="${chances}">
                                <f:selectItem itemLabel="${chance.subject}" itemValue="${chance.id}" />
                            </c:forEach>
                        </h:selectOneMenu>
                    </c:if> <c:if test="${fn:length(it.chance.subject) gt 0}">
                        <a>${it.chance.subject}</a>
                    </c:if></td>
            </tr>
            <tr>
                <td>机会阶段:</td>
                <td><h:selectOneMenu id="stage" value="${it.stage.order}">
                        <f:selectItem itemLable="" itemValue="" />
                        <f:selectItem itemLabel="初步沟通" itemValue="1" />
                        <f:selectItem itemLabel="实质进展" itemValue="2" />
                        <f:selectItem itemLabel="已经报价" itemValue="3" />
                        <f:selectItem itemLabel="合同付款洽谈" itemValue="4" />
                        <f:selectItem itemLabel="合同签订" itemValue="5" />
                    </h:selectOneMenu>
                </td>
            </tr>
        </table>
        <div id="addPartyDialog" title="click the icon to add party">
            <input type="text" id="search-text" /> <input type="button" id="search-btn" value="search" />
            <table id="partyList" width="100%" cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th>客户名称</th>
                        <th>地址</th>
                        <th>传真</th>
                        <th>电话</th>
                        <th>网址</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th>客户名称</th>
                        <th>地址</th>
                        <th>传真</th>
                        <th>电话</th>
                        <th>网址</th>
                        <th>操作</th>
                    </tr>
                </tfoot>
            </table>
        </div>


    </ui:define>

    <ui:define name="content.extra">
    </ui:define>

</ui:composition>
</html>