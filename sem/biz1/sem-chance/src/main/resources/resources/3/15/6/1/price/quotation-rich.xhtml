<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:pc="http://bee32.com/plover/core"
    xmlns:sem="http://bee32.com/sem/functions" xmlns:p="http://primefaces.prime.com.tr/ui"
    xmlns:t="http://myfaces.apache.org/tomahawk">
<!-- InstanceBegin template="/Templates/seccaJsf.dwt.jsp" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<ui:composition template="/template/primefaces.xhtml">

    <ui:define name="title">报价单(做好以后整合到机会)</ui:define>

    <ui:define name="content">

        <h:form id="main">

            <p:growl id="growl" showDetail="true" />

            <p:panel>
                <p:toolbar id="toolbar">
                    <p:toolbarGroup align="left">
                        <p:commandButton value="编辑" />
                        <p:commandButton value="详细" actionListener="#{quotationBean.viewDetail}" update="main:mx" oncomplete="dlg.show();"/>
                        <p:commandButton value="转成订单" />
                    </p:toolbarGroup>
                </p:toolbar>
                <p:dataTable id="invoiceList" var="item" value="#{quotationBean.quotations}"
                    selection="#{quotationBean.selectedQuotation}" selectionMode="single" rowIndexVar="rowIndex">

                    <p:ajax event="rowSelect" listener="#{quotationBean.onRowSelect}" update="main:toolbar" />
                    <p:ajax event="rowUnselect" listener="#{quotationBean.onRowUnselect}" update="main:toolbar" />

                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="序号" />
                        </f:facet>
                        <h:outputText value="#{rowIndex + 1}" />
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="标题" />
                        </f:facet>
                        <h:outputText value="#{item.subject}" />
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="报价日期" />
                        </f:facet>
                        <h:outputText value="#{item.createdDate}" />
                    </p:column>
                </p:dataTable>

                <p:dialog header="报价单" widgetVar="dlg" height="400" width="600">
                    <p:panel id="mx">
                        <h:outputLabel for="subject" value="标题:" />
                        <p:inputText id="subject" value="#{quotationBean.quotation.subject}" />

                        <h:outputLabel for="chance" value="机会:" />
                        <p:inputText id="chance" value="#{quotationBean.quotation.chance.subject}" />

                        <h:outputLabel for="amount" value="总金额:" />
                        <p:inputText id="amount" value="#{quotationBean.quotation.amount}" />

                        <h:outputLabel for="recommend" value="交付说明" />
                        <p:inputTextarea id="recommend" value="#{quotationBean.quotation.recommend}" />

                        <h:outputLabel for="payment" value="付款说明" />
                        <p:inputTextarea id="payment" value="#{quotationBean.quotation.payment}" />

                        <h:outputLabel for="remark" value="备注" />
                        <p:inputTextarea id="remark" value="#{quotationBean.quotation.remark}" />

                    </p:panel>
                </p:dialog>

            </p:panel>


        </h:form>

    </ui:define>
</ui:composition>
</html>