<ui:composition template="/template/simple-entity.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui" xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:icsf="http://java.sun.com/jsf/composite/3/7"
    xmlns:sem="http://java.sun.com/jsf/composite/3/15">

    <ui:param name="title" value="工资管理" />
    <ui:param name="bean" value="${salaryAdmin}" />
    <ui:param name="obj" value="${bean.openedObject}" />

    <ui:define name="dataColumns">
        <p:column headerText="日期">
            <h:outputText value="${entry.dateString}" />
        </p:column>
        <p:column headerText="雇员">
            <h:outputText value="${entry.employee.person.name}" />
        </p:column>
        <p:column headerText="工资(合计)">
            <h:outputText value="${entry.total}" />
        </p:column>
    </ui:define>

    <ui:define name="toolsColumn">
        <p:commandButton id="viewTool" title="查看" icon="ui-icon-search" rendered="${readable != null ? readable : true}"
            actionListener="${bean.showContent(entry)}" update="${_contentUpdate}" oncomplete="${plainEditForm ? '' : 'editdlg.show()'}">
        </p:commandButton>
        <p:commandButton id="editTool" title="修改" disabled="${not entry.locked}" icon="ui-icon-pencil"
            rendered="${editable != null ? editable : true}" actionListener="${bean.showEditForm(entry)}" update="${_contentUpdate}"
            oncomplete="${plainEditForm ? '' : 'editdlg.show()'}">
        </p:commandButton>
    </ui:define>

    <ui:define name="editDialogContent">

        <t:panelGrid columns="3">
            <ui:repeat var="item" value="${obj.items}" varStatus="status">
                <h:outputText value="${item.elementType.category}" />
                <p:inputText value="${item.bonus}" />
                <p:commandButton value="编辑" onclick="editItemDialog.show();" type="button" />
            </ui:repeat>
        </t:panelGrid>

    </ui:define>

    <ui:define name="dialogs">
        <p:dialog id="itemDialog" header="测试" widgetVar="itemDialog">
            <p:commandButton value="确定" />
            <p:commandButton value="关闭" />
        </p:dialog>
    </ui:define>

</ui:composition>
