<ui:composition template="/template/custom-rich.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui" xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:sem="http://java.sun.com/jsf/composite/3/15">

    <ui:param name="title" value="物料导入" />
    <ui:param name="bean" value="${materialBatchImportBean}" />

    <ui:define name="styles">
        <link rel="stylesheet" type="text/css" href="bubble.css" />
    </ui:define>

    <ui:define name="content">

        <div style="background-color:white;height:400px;overflow-y:auto;">

            <h:form id="mainForm">

                <p>
                    <h:outputText value="选择销售机会:" />
                    <p:inputText id="chance" value="#{bean.target.subject}" readonly="true" />
                    <p:commandButton value="..." onclick="chooseChanceDialog.show();" />
                </p>
                <p>
                    <h:outputText value="选择材料表文件:" />
                    <input type="file" id="fileinput" />
                    <div class="bubble">
                        导出为csv文件前，excel格式要求：
                        <table border="1px solid;">
                            <tr>
                                <td colspan="8" style="text-align:center;">某某材料表</td>
                            </tr>
                            <tr>
                                <td>编号</td>
                                <td>规格（mm）</td>
                                <td>长度（mm）</td>
                                <td>数量</td>
                                <td>单重（kg）</td>
                                <td>表面积（m²）</td>
                                <td>材质</td>
                                <td>备注</td>
                            </tr>
                            <tr>
                                <td colspan="8" style="text-align:center;">材料表数据...</td>
                            </tr>
                            <tr>
                                <td colspan="8" style="text-align:center;">材料表数据...</td>
                            </tr>
                        </table>
                    </div>
                </p>
                <p:separator />

                <t:div id="test">

                    <p>
                        <h:outputText value="构件" class="prompt" />
                        <table id="component">
                            <tbody></tbody>
                        </table>
                    </p>
                    <p>
                        <h:outputText value="零件" class="prompt" />
                        <table id="part">
                            <tbody></tbody>
                        </table>
                    </p>
                    <p>
                        <h:outputText value="原材料" class="prompt" />
                        <table id="raw">
                            <tbody></tbody>
                        </table>
                    </p>
                </t:div>

                <h:inputHidden id="part" value="${bean.partData}" />

                <p:commandButton id="start_import" value="开始导入" actionListener="${bean.doImport}" />

                <script>
                    $(".prompt").hide();
                    $("#mainForm\\:start_import").hide();
                </script>
            </h:form>

            <script type="text/javascript" src="./cus_analysis.js">
            </script>
            <sem:chooseChanceDialog id="chooseChanceDialog" target="${bean.target}" update=":mainForm:chance" />

        </div>
    </ui:define>

</ui:composition>
