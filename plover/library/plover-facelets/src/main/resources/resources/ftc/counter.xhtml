<?xml version="1.0" encoding="utf-8" ?>
<ui:composition template="template.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
    xmlns:pf="http://bee32.com/plover/faces">

    <ui:define name="title">Push-Counter Test</ui:define>

    <ui:define name="body">

        <script type="text/javascript">
            function handleMessage(evt, data) {
            alert("on message: " + data);
            $('.display').html(data);
            }
        </script>

        <h:form>
            <h:outputText value="#{globalCounterBean.count}" styleClass="display" />
            <p:commandButton value="Click" actionListener="#{globalCounterBean.increment}" />
        </h:form>

        <pf:push id="push1" onmessage="handleMessage" channel="counter" />

    </ui:define>
</ui:composition>
